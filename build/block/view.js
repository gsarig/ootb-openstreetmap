(()=>{"use strict";!function(){const t=ootb.providers,e=ootb.options,o=ootb.gestureHandlingOptions;document.querySelectorAll(".ootb-openstreetmap--map").forEach(function(n){const a=n.getAttribute("data-provider")||"openstreetmap",i=n.getAttribute("data-markers"),r=n.getAttribute("data-marker"),s=n.getAttribute("data-zoom"),l=n.getAttribute("data-minzoom"),d=n.getAttribute("data-maxzoom"),p=n.getAttribute("data-dragging"),u=n.getAttribute("data-touchzoom"),c=n.getAttribute("data-doubleclickzoom"),g=n.getAttribute("data-scrollwheelzoom"),b=JSON.parse(decodeURIComponent(r)),m=JSON.parse(decodeURIComponent(i)),f=n.getAttribute("data-maptype"),h=n.getAttribute("data-showmarkers"),y=n.getAttribute("data-shapestyle"),A=JSON.parse(decodeURIComponent(y)),x=n.getAttribute("data-shapetext"),O=n.getAttribute("data-mapboxstyle");let k="";if(O)k=O;else{const t=function(t,e){if(!t||!e||"string"!=typeof t||"string"!=typeof e||!t.startsWith("mapbox://"))return"";const o=t.split("/"),n=o[3],a=o[4];return n&&a&&"string"==typeof n&&"string"==typeof a?`https://api.mapbox.com/styles/v1/${n}/${a}/tiles/{z}/{x}/{y}?access_token=${e}`:""}(e.global_mapbox_style_url,e.api_mapbox);t&&(k=encodeURIComponent(JSON.stringify(t)))}let C="";"mapbox"===a&&(C=e.api_mapbox);let I=t[a].url;"mapbox"===a&&k?I=JSON.parse(decodeURIComponent(k)):I+=C;const S={minZoom:parseInt(l),maxZoom:parseInt(d)};e.prevent_default_gestures&&(S.gestureHandling=!0,o&&Object.keys(o).length>0&&(S.gestureHandlingOptions=o));const U=function(t,e,o,n,a){const i=L.map(t,e),r=JSON.parse(t.getAttribute("data-bounds"));if(null!==r[0]&&null!==r[1])i.setView(r,parseInt(o));else{let t=[];if(n.forEach(e=>{const o=JSON.parse(decodeURIComponent(a)),n=structuredClone(o);e.icon&&(n.iconUrl=e.icon.url);let r=L.marker([e.lat,e.lng],{icon:L.icon(n)});e.text&&r.bindPopup(e.text),t.push(r),r.addTo(i)}),t.length){let e=new L.featureGroup(t);i.fitBounds(e.getBounds())}}return i}(n,S,s,m,r);if("false"===p&&U.dragging.disable(),"false"===u&&U.touchZoom.disable(),"false"===c&&U.doubleClickZoom.disable(),"false"===g&&U.scrollWheelZoom.disable(),L.tileLayer(I,{attribution:t[a].attribution}).addTo(U),m&&m.length){if("polygon"===f){const t=L.polygon(m,A).addTo(U);U.fitBounds(t.getBounds()),x.length&&t.bindPopup(x)}else if("polyline"===f){const t=L.polyline(m,A).addTo(U);U.fitBounds(t.getBounds()),x.length&&t.bindPopup(x)}"false"!==h&&m.forEach(function(t){const e=structuredClone(b);t.icon&&(e.iconUrl=t.icon.url);let o=L.marker([t.lat,t.lng],{icon:L.icon(e)});t.text&&o.bindPopup(t.text),o.addTo(U)})}})}()})();